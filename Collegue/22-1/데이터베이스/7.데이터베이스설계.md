# 데이터베이스의 생명주기, 설계 절차
## 데이터베이스 생명주기
1. 요구사항 분석
2. 설계
3. 구현
4. 운영
5. 감시 및 개선

## 데이터베이스 설계 절차
1. 요구사항 분석
    - 사용자 요구사항 이해, 조직의 목표와 제약조건을 분석
        - 인터뷰, 설문조사, 업무자료 분석
    - 정적인 정보 요구와 동적인 정보 요구를 분리해서 분석한다
    - 분석도구 : DFD, HIPO, Orr-Warnier, UML

2. 개념적 데이터베이스 설계
    - 분석 결과물을 DBMS에 독립적인 개념스키마 구조로 정의, 개체-관계(E-R)다이어그램으로 표현
    - 개체(entity)
        - 강 개체(strong entity) : 식별자(키)를 가져서 유일하게 식별할 수 있는 개체
        - 약 개체(weak entity) : 식별자가 없고 다른 개체의 인스턴스에 종속되어야만 존재하는 개채

    - 관계(relationship)
        - 두개 이상의 개체들 간의 상호 관련성 정보로 관계를 표현하기 위한 속성값들의 집합
        - 관계 인스턴스(instance, occurrence)
            - 관계 개체 인스턴스들의 식별자를 구성해서 관계 인스턴스를 표현한다

        - 차수에 따른 관계 : 일대일 관계, 일대다 관계, 다대다 관계
    
    - 속성(attrbute) : 개체또는 관계가 갖는 특성 또는 키(key)

3. 논리적 데이터베이스 설계
    - DBMS를 선택, DBMS의 데이터 모델에 적합한 논리적 구조를 정의하는 과정
        - 논리적 스키마 도출
    
    - 정규화(normalization) : 이상적인 관계 데이터 모델의 논리적 스키마를 생성하기 위한 과정

4. 물리적 데이터베이스 설계
    - 논리적 스키마의 적절한 저장 구조와 액세스 방법을 정의
        - 데이터베이스 시스템의 최적화가 목적

    - 물리적 스키마 : 데이터베이스를 저장장치에 조직화하기 위한 방법
        - 구성요소 : 저장구조, 물리적 접근 방법, 색인 구조, 트랜잭션 유형등

# 데이터 베이스 정규화(1)
> 학습내용
- 정규화 개요, 이론
- 정규화가 되지 않은 논리적 구조의 이상 현상
- 정규형의 포함관계
- 함수 종속

## 정규화(Normalizatino) 개요
- 중복 최소화로 저장 효율을 높이고 연산 시 이상현상을 최소화하는 논리적 구조로 변환하는 작업
- 장점 : 일관성 향상, 확장성 보장, 견고한 논리적 구조
- 역사
    - 1970, E.F.Codd에 의해 제안
    - 초기에 제1 정규형(1NF), 제2 정규형(2NF), 제3 정규형(3NF)의 기초적 정규형을 이론화
        - 일반적으로 이 세가지 정규형으로 대부분의 정규화를 처리 할 수 있다
    - 이후 보이스-코드(BCNF), 제 4정규형(4NF), 제 5정규형(5NF)등의 고차 정규형으로 발전

- 정규화 되지 않은 논리적 구조의 이상(anomaly)현상
    - 삭제 이상(deletion anomaly) : 한 개의 튜플을 삭제시 유지해야 할 정보까지 삭제되는 정보 상실 현상
    - 삽입 이상(insertion anomaly) : 테이블에 데이터 삽입시 불필요한 데이터까지 삽입해야 하는 경우
    - 갱신 이상(update anomaly) : 중복된 튜플 중 일부만 갱신, 정보의 불일치성(inconsistency)가 발생하는 현상

- 정규화 이론
    - 릴레이션이 어떤 제약 조건의 집합을 만족하는지에 따라 어떤 정규형에 속하는지 정의된다
        - 상위 단계 일수록 제약조건이 추가되고 더 정규화된 형태로 정제 된다
    - 상위 단계 정규형은 하위단계를 모두 포함한다

- 함수 종속(Functional Dependency)
    - 데이터베이스 릴레이션에서 두개의 속성 집합 간 제약의 일종
    - R.X -> R.Y
        - Y는 X에 종속된다(정의역, 치역의 관계)
        - X의 값이 Y의 값을 함수적으로 결정한다
        - X는 결정자로 다른 속성을 고유하게 결정하는 하나이상의 속성을 의미, Y는 종속자
    
    - 함수 종속의 성질
        - 완전 함수 종속(FFD, Full Functional Dependency)
            - 주어진 결정자들을 모두 포함해야 찾을 수 있는 종속자
        
        - 부분 함수 종속(PFD, Partial Functional Dependency)
            - 주어진 결정자들중 일부 속성으로 찾을 수 있는 종속자

    - 예
        - 수강.학번 -> 수강.이름
            - 학번은 이름을 고유하게 결정한다
        - {수강.학번, 수강.과목명} -> 수강.성적
        - 원하는 종속값을 찾기위한 고유한 속성들이 결정자
    
# 데이터베이스 정규화(2)
> 학습내용
- 제 1, 2, 3 정규형

## 데이터 베이스 제 1 정규형(First Normal Form)
- 릴레이션의 모든 속성들이 단일값(atomic value)만을 갖는 형태
    1. 제 1 정규형으로 만들기 위해서는 릴레이션의 속성중 그룹값을 별도의 릴레이션으로 설계해야 한다
    2. 기존의 릴레이션의 기본키를 분리된 릴레이션에 다시 사용

- 예
    1. 속성에 그룹값이 존재하는 경우 
        - id : 13, 이름: 주영, 취미 : 야구, 농구, 볼링 
    2. 별도의 릴레이션으로 정의해서 중복 최소화
        - id : 13, 취미 : 야구
        - id : 13, 취미 : 농구
        - id : 13, 취미 : 볼링
    
    
## 데이터 베이스 제 2 정규형(Second Normal Form)
- 기본키로 여러개의 속성이 함께 사용되는 복합키(composite key)를 사용하는 릴레이션의 일반 속성이 모두 복합키에 종속되는 형태
    1. 일반 속성이 일부의 키 속성에만 부분적으로 종속된다면 이 속성을 별도의 릴레이션으로 설계해야 한다
    2. 제 1 정규형을 만족해야 한다

- 예
    1. 일반 속성이 부분적으로 종속되는 경우
        -  고객번호 : 11, DVD번호 : A212, 대여일자 : 2013.1.1, 장르 : 드라마
    2. 함수 종속성 분석
        - (고객번호, DVD번호) -> 대여일자 : 완전 종속 관계
        - DVD번호 -> 장르 : 부분 종속 관계
    3. 부분 종속 관계는 별도의 릴레이션 정의

## 데이터 베이스 제 3 정규형(Third Normal Form)
- 기본키가 아닌 일반 속성들 간의 종속 관계가 존재하지 않는 형태
    1. 일반 속성에 종속되는 속성은 별도의 릴레이션으로 분리해야 한다
    2. 제 2 정규형을 만족해야 한다

- 예
    1. 일반 속성이 일반 속성에 종속되는 경우
        - 사번 : 1234, 이름 : 김주영, 기숙사 : 다산관, 임대료 : 200,000원
    
    2. 함수 종속성 분석
        - 사번 -> 성명 
        - 사번 -> 기숙사
        - 사번 -> 임대료
        - 기숙사 -> 임대료 : 일반 속성간의 종속 관계
    
    3. 일반 속성 간의 종속관계를 별도의 릴레이션으로 정의

