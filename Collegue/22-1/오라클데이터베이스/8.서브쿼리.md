# 단일 행 서브쿼리
> 학습내용
- 서브쿼리 개념 및 적용 가능 문제 파악
- 서브쿼리 사용 지침
- 단일 행 서브쿼리와 단일 행 비교 연산자
## 서브쿼리를 사용한 문제해결
``` sql
SELECT last_name, salary
FROM employees
WHERE salary >  
    (SELECT salary 
    FROM employees
    WHERE last_name = 'juyoung');
```
- 괄호 사용 필수
- 가독성을 위해 오른쪽에 배치
- 서브쿼리 결과 건수에 맞는 비교 연산자를 사용
    - 단일행 서브쿼리는 단일행 비교 연산자 사용
    - 다중 행 서브쿼리에는 다중 행 비교 연산자 사용
        - '=' -> 서브 쿼리를 IN()처럼 사용

- 서브 쿼리가 먼저 수행되고 메인 쿼리에 적용된다
## 단일 행 서브쿼리
- 개요
    - 한 행만 반환
    - 조건식에서 단일 행 비교 연산자 사용

- 쿼리 블록(query block)
    - 각 SELECT문으로 최적화 되는 단위이다

# 다중 행 서브쿼리
> 학습내용
- 다중 행 서브쿼리, 다중 행 비교 연산자
- 서브쿼리와 그룹 함수
- 서브쿼리와 NULL

## 다중 행 서브쿼리
- 한 행 이상 반환
- 조건식에서 다중 행 비교 연산자 사용
  - IN(서브쿼리) : =ANY()와 같다
  - 비교 연산자 ANY(서브쿼리) : 서브쿼리 결과의 OR 연산을 비교
    - ```< ANY(...)``` : 서브쿼리 결과값의 최대값보다 작은
    - ```> ANY(...)``` : 서브쿼리 결과값의 최소값보다 큰
  - 비교 연산자 ALL(서브쿼리) : 서브쿼리 결과의 AND 연산을 비교
    - ```< ALL(...)``` : 서브쿼리 결과값의 최소값보다 작은
    - ```> ALL(...)``` : 서브쿼리 결과값의 최대값보다 큰

- NOT의 위치 : NOT column 비교연산자 서브쿼리 형태로 사용

## 서브쿼리 그룹 함수시
- GROUP BY 미사용 -> 단일 행 서브쿼리
- GROUP BY 사용 -> 다중 행 서브쿼리

## 서브쿼리와 NULL
- 단일 행 서브쿼리 결과 값이 NULL 
  - WHERE col = NULL -> 메인 쿼리 결과도 NULL
  
- 다중 행 서브쿼리 결과 중 일부가 NULL
  - ANY, IN : 메인 쿼리 결과에 영향 없음(OR 연산)
  - ALL, NOT IN : 메인 쿼리 결과는 NULL(AND 연산)
