# 데이터 삽입
> 학습내용
- DML 리뷰
- INSERT 문 구문 및 다양한 데이터 삽입 방법
- 다중 테이블 INSERT문 구문


## 데이터 조작어(DML)
- INSERT, UPDATE, DELETE, MERGE, SELECT(DQL)
- 테이블과 뷰는 같은 namespace를 가져서 같은 이름을 가질 수 없다
    -  TABLE, VIEW와 같은 키워드가 필요 없다

## INSERT문
```sql
-- VALUES : 한 행만 삽입, 테이블 컬럼 순서대로 값 입력
INSERT INTO table_name VALUES (x, y, ...)

-- 서브쿼리 : 여러 행 삽입
INSERT INTO table_name 
    SELECT column_name
    FROM table_name
    WHERE predicate;

-- 선택적 컬럼값 삽입
INSERT INTO table_name (column_name, ...)
VALUES (x, ...)

-- 무조건 INSERT ALL
INSERT ALL
    INTO table_name VALUES (x, y, ...)
    INTO table_name VALUES (x, y, ...)
    SELECT x, y
    FROM ...

-- 조건부 INSERT ALL
INSERT ALL
    WHEN predicate THEN
        INTO table_name VALUES(x,y...)
    ELSE
        INTO table_name VALUES(x,y...)
    
    SELECT x,y 
    FROM ... 

```
- 정의된 데이터의 타입과 다르거나 크기보다 크면 오류 발생
- 컬럼명을 생략하면 해당 컬럼의 default값이 할당된다

# 데이터 변경 및 삭제
> 학습내용
- UPDATE, DELETE, TRUNCATE
- DELETE, TRUNCATE, DROP문 비교, 이해, 적용

## UPDATE 문
- 테이블의 컬럼 단위로 데이터를 변경
    ```sql
    UPDATE table_name
    SET column = value , ...
    [WHERE condition]
    ```
    - SET에 다중 컬럼을 정의할때는 ()안에 작성

## DELETE 문
- 테이블의 행(튜플) 단위로 데이터를 제거
    ```sql
    DELETE [FROM] table_name
    [WHERE condition]
    ```
    - WHERE절이 없으면 모든 행이 삭제 된다
    - ROLLBACK으로 복구 가능
    
## TRUNCATE 문
- 테이블 구조는 그대로 남겨두고 모든 행 삭제
    ```sql
    TRUNCATE TABLE table_name
    ```
    - DDL문이라서 ROLLBACK되지 않는다
        - DDL문은 변경사항이 데이터베이스에 바로 반영(commit)된다
    - **HWN(high-water mark)**를 처음으로 이동시키는 방식
        - 테이블을 만들면 미리 정의된 data block(8kb)을 묶어서 할당 시켜준다
        - 데이터 블록의 몇번째까지 사용됬는지 가리키는 게 HWN이다
            - 모든 데이터 블록을 읽지 않고 효율적으로 데이터를 읽을 수 있다

## 데이터 삭제 방법 비교
- DELETE  : DML, 테이블 존재, 아주 느리다, ROLLBACK(ONLINE)으로 복구
    - 한 행씩 차례대로 지운다, ROLLBACK도 느리다

- TRUNCATE : DDL, 테이블 존재, 아주 빠르다, FLASHBACK DATABASE(OFFLINE)으로 복구
    - HWN을 이동시킨다, DBA의 도움을 받아서 복구할 수 있다

- DROP : DDL, 테이블 삭제, 아주 빠르다, FLASHBACK DROP(ONLINE)으로 복구
    - 테이블의 이름을 특정한 이름으로 바꾼다, 
