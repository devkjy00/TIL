# 8-3 상관관계와 공분산/ 유일 값, 값 세기, 멤버심

- ## 상관관계(Correlation)
    - 공분산이 1이면 A값과 B값이 비례한다
    - 공분산이 -1이면 A값과 B값이 반 비례한다
    
- ## 공분산(Coavariance)
    - 확률변수가 절대적인 크기에 영향을 받지않도록 일정하게 만드는 것

```py
import pandas_datareader.data as web
# 주가정보를 다운로드 받을 수 있게해주는 라이브러리
all_data = {ticker: web.get_data_yahoo(ticker)
        for ticker in ['AAPL', 'IBM', 'MSFT', 'GOOG', 'TSLA', 'AMZN']}
price = pd.DataFrame({ticker: data['Adj Close'] 
    # Adj Close : 수정 종가
        for ticker, data in all_data.items()})

volume = pd.DataFrame({ticker: data['Volume']
        for ticker, data in all_data.items()}) 
    # 'Volume : all_data에 저장된 종목들의 거래량

returns = price.pct_change()# 퍼센트_체인지
# price에 저장되어있는 주가의 퍼센트 변화율을 반환한다
returns.tail()
# 마지막 5일간의 정보를 반환한다

returns['MSFT'].corr(returns['IBM'])
# .corr() 두객체의 상관관계를 계산하는 메서드
# 상관관계가 1에 가까울 수록 두 주가가 같이 올라가고 같이내려가고, -1에 가까울수록 반비례해서 움직인다는 뜻

returns['MSFT'].cov(returns['IBM'])
# .cov() 두객체의 공분산을 구하는 메서드

returns.corr()
returns.cov()
# 저장된 정보들 의 상관관계, 공분산을 반환

returns.corrwith(returns.IBM)
# .corrwith(): Series,DataFrame과의 상관관계를 계산

returns.corrwith(volume)
# 거래량의 퍼센트 변화율에 대한 상관관계를 계산한다

```
- ### 유일 값, 값 세기, 멤버십
```py
obj = pd.Sries(['c','a','d','a','a','b'])

uniques = obj.unique()
# .unique() : 유일 값을 정렬하지 않고 반환

obj.value_counts()
# .value_counts() : Series에서 중복된 값이 몇개인지 계산

pd.value_counts(obj.values, sort=False)
# 정렬되지 않은 순서로 반환

mask = obj.isin(['b','c'])
# .isin() : 어떤 값이 Series에 존재하는지 각 인덱스를 불리언 벡터로 반환한다.
obj[mask]
# True 값인 인덱스만 반환

```