# HTTP &HTTPS

## HTTP
    HTTP는 클라이언트와 서버간에 요청과 응답으로 정보를 주고 받을 수 있은 통신규약(Protocol)이다

- HyperText라는 텍스트를 주고받아서 네트워크 전송신호를 Intercept하면 원치 않는 데이터를 유출할 수 있다
- *TCP, UDP*를 사용, 80번 포트를 사용한다
- ### 비연결 지향
    - 클라이언트가 요청을 보내고 서버에서 응답을 보내면 바로 연결을 끊는다
- ### 상태정보 유지안함
    - 연결을 끊는 순간 통신이 끝나고 상태 정보를 유지하지않느다

## HTTP 1.0/1.1/2.0/3.0

- ### ***HTTP 1.0***
    -  open/operation/close 방식의 단순한 구조
    - 1.0버젼에서는 TCP연결을 3-way handshake 방식(1GET1Connection)
    - 매번 request/response가 끝나면 다시연결 하기때문에 *속도가 느리고 반복되는 재연결로 서버 과부화, 성능하락*
    - URL크기가 작고 한번에 가져올 수있는 데이터양이 제한되어있다

- ### ***HTTP 1.1***
    - 연결을 지속해서 클라이언트와 서버가통신한다(Persistent Connection(Keep-alive))
    - HTTP 1.1은 Persistent 기능을 이용해 한 개의 TCP세션을 통해 여러요청(Pipelining)이 가능하다
    - 서버 부하를 줄이고 응답속도를 개선했다
    - ***무거운 Header구조***
        - Header에는 메타정보가 저장되어있다.
        - 매 요청시 마다 중복된 Header값을 전송한다.
        
>Persistent Connection
    
- 요청/응답을 직렬로 여러차례 실행하고 연결을 끊는다

>Pipelinging

- 요청->응답을 순차적으로 처리하던 방법에서
***요청에 대한 응답을 뒤로 미루는 방법***을 사용 따라서 하나의 Connection요청으로 다수의 요청/응답을 병행으로 처리할 수있다.

- 응답이 순차적으로 이루어지기때문에 후순위 응답일 수록 느려진다.

- ### ***HTTP 2.0***
    - 하나의 Connection으로 동시에 여러 요청/응답을 실행하고 응답은 순서에 상관없이 Stream으로 주고받는다
    - Header정보를 중복해서 보내는 방식을 개선했다(Header Compression)
>Stream Prioritization

- 리소스간의 의존관계(우선순위)를 설정해서 요청/응답 효율을 개선했다.
>Header Compression
- Header 정보를 압축하기 위해 HPACK압축방식을 사용
- 중복 값이 존재하는 경우 Index만 전송, 나머지 Header정보는 Huffman Encoding기법으로 인코딩한다

- ### ***HTTP 3.0***
    - 이전의 TCP를 이용하기 때문에 Handshake의 RTT(Round Trip Time)로 인한 Latency, TCP의 HOLB 문제가 발생
-> 문제해결을 위해 QUIC사용
    - Header에 별도 패킷 번호 공간에 패킷의 고유 번호를 저장 -> 패킷 손실 감지와 패킷에 대한 흐름 제어를 효율적으로 할 수 있다
    - **클라이언트의 IP가 바뀌어도 연결이 유지된다**
        - TCP는 IP로 포트를 식별, IP가 바뀌면 연결이 끊긴다
        - QUIC는 IP와 무관한 Connection ID로 연결하기때문에 IP가 바뀌어도 연결을 유지한다

>RTT(Round Trip Time)
- RTT(Round Trip Time : 왕복 지연시간)은 통신 에서 ***왕복 지연 시간 ( RTD )*** 또는 ***왕복 시간 ( RTT )*** 은 신호가 전송되는 데 걸리는 시간과 해당 신호의 수신 확인에 소요되는 시간을 더한 값

>QUIC(Quick UDP Internet Connection)
- 2.0의 TCP+TLS 에서 보안 및 향상된 기능을 제공하는 UDP기반 전송계층 프로토콜
- UDP사용으로 TCP의 Handshake과정을 거치지 않는다
- 연결 설정에 필요한 정보와 함께 데이터도 보내 첫 연결 설정에 1 RTT, 다음 연결은 0 RTT로 통신이 가능합니다.




## HTTPS
    HTTPS는 HTTP의 보안 취약적을 해결하기위해 강화된 버젼의 프로토콜이다

- 기본 TCP/IP 포트로 443번 포트를 사용한다
- 기본 골격과 사용목적은 동일하지만 소켓통신에서 일반텍스트를 사용하지않고 *TLS*나 *SSL* 프로토콜을 통해 정보를 암호화 한다, 모든 통신을 암호화하는 것

### *원리*
- 암호와, 복호화 시킬수 있는 서로 다른키(공개키, 개인키)를 사용해서 암호화 한다
    - 공개키 : 모두에게 공개해서 공개키저장소에 등록
    - 개인키(비공개키) : 개인이 소유하고있는 비공개키
- 공개키로 암호화 -> 개인키로 복호화/ 개인케로 암호와 -> 공개키로 복호화
- 클라이언트(공개키) - 서버(개인키)
    - 클라이언트가 데이터를 암호화하면 개인키를 가지고 있는 서버만 복호화 해서 데이터르 얻는다
    - 서버가 데이터를 제공하면 공개키를 가지고 있는 클라이언트 모두가 데이터를 얻는다


#### 장점
- 보안이 강화된 만큼 안전
#### 단점
- 보안기능으로 HTTP보다 처리속도가 느림
- 보안 인증서를 발급하고 유지하기위한 추가비용
- 암호화 과정이 웹 서버에 부하는 줌

## 따라서!
        개인정보와 같이 보안에 민감한데이터는 HTTPS프로토콜
        단순한 정보, 보안에 문제없는 데이터는 HTTP프로토콜
