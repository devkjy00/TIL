## 스프링의 핵심
- 스프링은 프레임워크, 오픈소스이고 IoC컨테이너를 가지고 Di를 지원한다
	- IoC, Di를 사용하면 스프링이 제어를 역전한 객체를 공유해서 여러 범위에서 사용할 수 있다
- 많은 필터와 어노테이션을 가지고 있다
	- 필터는 유효성검사를 한다
	- 어노테이션으로 객체를 생성해서 주입할 수 있다
		- @component : 지정된 클래스를 메모리에 로딩
			```java
			@component
			class A{}
			```
		- @Autowired : 메모리에 로딩된 클래스중 적절한 인스턴스를 생성, 지정된 변수에 주입해준다(DI)
			```java
			@Autowired
			A a;
			```

- MessageConverter를 가지고 있고 Json이 기본값이다
	- Json은 중간언어의 역할로 프로그래밍언어가 이해할 수 있어서 서로 객체를 주고 받을 수 있게한다
	- MessageConverter으로 Json으로 변환하거나 Json을 읽을 수 있다

- BufferedReader BufferedWriter로 쉽게 사용할 수 있다
	- @ResponseBody -> BufferedWriter가 동작
	- @RequestBody -> BufferedReader가 동작

## JPA 개념
- Java Persistence(영속성) API이다
	- DBMS에 데이터저장을 돕는 역할
	
- ORM기술을 가지고 있다
	- Object Relational Mapping
	- 데이터베이스에서 값을 정의하는 방법(타입)을 모델링해서 자바의 객체를 변환시킨다
	- JPA인터페이스를 통해 객체로 데이터베이스 테이블을 자동 생성할 수 있다
		- 반복적 CRUD작업을 대신 해준다
		- 자바와 DB의 세션을 연결, 주고 받는 데이터를 변환할 수 있다
	
- 영속성 컨텍스트를 가지고 있다
	- 영속성 컨텍스트 : 영속성에 대한 모든 것을 알고있는 것
		- 자바는 영속성 컨텍스트를 통해서 DB와 통신한다
	- 자바와 DB 사이에서 중계하는 역할
		- 각 환경에 맞게 데이터를 변환
		- 자바와 DB에 데이터를 동기화

- DB와 OOP의 불일치성(객체저장불가)를 해결하기 위한 방법론을 제공한다
	- DB에서 읽어온 데이터중 외래키의 경우 참조하는 것이 뭔지 참조하는 테이블을 한번더 읽어오지 않는 이상 알 수 없다
	- 외래키의 값을 자동으로 외래키가 참조하는 인스턴스로 맵핑하도록 해준다

- OOP관점에서 모델링을 할 수 있게 해준다(상속, 포함, 연관)
	- 관계가 있는 인스턴스를 자동으로 JOIN해준다

- 방언 처리가 용이하여 Migration하기 좋고 유지보수에 좋다
	- 오라클, MSSQL, MYSQL, POSTSQL등 서로 다른 데이터베이스의 SQL을 추상화객체를 통해서 쉽게 변경가능하다


## 스프링부트 동작원리
- 내장 톰캣을 가진다(설치없이 실행가능)
	- 아파치는 .html, .css, .png등을 이해하지만 자바(.jsp)를 이해하지 못해서 톰캣에게 위임한다
		- 톰캣은 자바코드를 컴파일해서 html문서로 만든다
		- 사용자 웹브라우저가 이해할 수 있도록 응답하는 것

	- 소켓 통신
		- 메인 스레드의 소켓에서 요청을 받으면 새로운 스레드로 소켓을 열어서 요청한 호스트와 통신한다
		- 통신이 계속 연결, 부하가 있지만 연속적 서비스가 가능하다

	- http는 html문서를 전달하는 프로토콜로 요청에 응답후 연결이 끈어진다
		

- 서블릿 컨테이너(톰캣) 동작
	1. 스프링은 URI로만 요청해서 특정 파일을 요청할 수 없고 따라서 무조건 자바를 사용한다
		- URL : 자원 접근, http://abc.com/a.png
		- URI : 식별자 접근, http://abc.com/img/a

	2. 따라서 아파치는 스프링의 요청을 모두 톰캣에게 위임한다
	3. 최초 요청시 서블릿 객체를 생성(new), 초기화(init)하고 동작한다
		- 서블릿 객체의 메서드 호출
			1. 최초 요청일때만 객체생성(new)하고 init() 호출
				- 기존의 서버 스레드에서 호출한다

			2. service() 호출
				- 사용된 API가 POST,GET,PUT,DELETE 중 어떤 것인지 체크한다
                - 생성된 스레드에서 호출한다 
				
			3. 사용된 API메서드를 호출
				- html문서를 만들어서 응답한다

		- 최초 요청이 아니면 이전의 객체를 재사용한다(객체는 1개만 생성)
			- new(), init() 호출x
			- 생성된 스레드에서 service()호출

        - 스레드 관리
			- 스프링에서 스레드 생성을 제한할 수 있다
				- 하드웨어의 성능에 따라서 제한
			- 스레드의 작업이 끝나면 종료하지 않고 다음 요청에서 재사용 된다
			- 동시에 요청을 처리해야 할때 스레드를 생성한다
			- 스레드를 만들수 없으면 대기하다가 완료된 스레드가 생기면 처리된다