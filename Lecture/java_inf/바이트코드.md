### 코드 커버리지 측정
- 바이트 코드를 이용해서 경로를 비교, 테스트코드로 커버된 코드되지 않은 코드를 찾을 수 있다 
- pom.xml에 플러그인을 추가해서 사용할 수 있다

### 바이트 코드 조작 라이브러리
- ASM, Javassist, ByteBuddy(가장 쉽다)

- ByteBuddy로 바이트 코드를 조작해서 특정 메서드의 기능을 재 정의 할 수 있다
    - 메서드 이름과 원하는 반환값을 정의
    - 재정의 한 기능의 클래스가 저장된 폴더에 저장하도록 설정 
    - 클래스를 컴파일 한 후에 재정의한 클래스를 컴파일해야 제대로 실행이 된
        - 컴파일 순서에 의존적이다

- javaagent
    - 코드를 덧 붙일수 있다
        - pom.xml에 설정을 명시해줘야 한다
        - premain구현 : 작성된 코드를 시작시 실행
        - agentmain구현 : 작성된 코드를 런타임중 동적으로 실행 
        - instrumentation이라는 값을 매개변수로 받아서 사용
        ```java
        public class A {
            public static void premain(Stirng agentArgs, Instrumentation inst) {
                // 바이트코드를 조작해서 컴파일 순서에 의존하지 않고 실행할 수 있다
            }
        }
        ```
        - 클래스로더가 클래스를 읽어올 때 javaagent를 거쳐서 변경된 바이트코드를 읽어들여 사용한다
            - 클래스 파일 자체가 변경되지는 않는다
          
### 바이트 조작 툴 활용
- 프로그램 분석
    - 코드에서 버그를 찾는 툴
    - 코드 복잡도 계산

- 클래스 파일 생성
    - 프록시
    - 특정 API호출 접근 제한
    - 스칼라 같은 언어의 컴파일러

- 자바의 소스 코드 변경없이 기능 변경이 필요한 경우
    - 프로파일러
    - 최적화(불필요한 코드를 제거하는 등)
    - 로깅
    - ...

- 스프링 컴포넌트 스캔을 하는 방법(ASM)
    - 컴포넌트 스캔으로 빈으로 등록할 후보 클래스 정보를 찾는데 사용
    - ClassReader와 Visitor 사용해서 클래스에 있는 메타 정보를 읽어온다.
  