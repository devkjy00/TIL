- ### TDD 법칙 세가지
    1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
    2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다
    3. 현재 테스트를 통과할 정도로만 실제 코드를 작성한다        

    - 이 방식으로 하면 실제 코드를 전부 테스트하는 테스트케이스가 나온다
        - 방대한 테스트 코드로 관리 문제를 유발하기도 한다(깨끗한 테스트코드 필요)
      
- ### 깨끗한 테스트 코드 유지하기
    - 실제 코드가 진화하면 테스트 코드도 변해야 한다
        - 지저분한 테스트코드일 수록 변경 하기 어렵다
        - 테스트 코드는 사고와 설계와 주의가 필요하다
    
    - *테스트는 유연성, 유지보수성, 재사용성을 제공한다*
        - 단위 테스트가 있음으로 인해서 변경을 두려워 하지 않게 된다
            - 테스트 케이스가 없다면 모든 변경이 잠정적인 버그가 된다
        
- ### 깨끗한 테스트 코드
    - *가독성, 가독성, 가독성*
        - 최소의 표현으로 많은 것을 나타내어야 한다
        - 한번에 여러번 중복호출 하는 코드는 테스트의 의도를 흐린다
            - 명확한 의미를 전달하는 하나의 함수로 만들 필요가 있다
        
        - BUILD-OPERATE-CHECK 패턴
            - 각 테스트를 세 부분으로 나눈다
                1. 테스트 자료를 만든다
                2. 테스트 자료를 조작,수행한다
                3. 결과가 올바른지 확인한다

            - 코드가 수행하는 기능을 빨리 이해할 수 있다

    - *도메인 특화 테스트 언어(DSL)*
        - 기존의 쓰는 API를 사용하는 대신 목적을 분명히 나타내는 도메인 언어로 함수를 만들면 테스트 코드를 짜기도 읽기도 쉬워진다
        - 구현 당사자와 독자를 도와주는 테스트 언어이다
    
    - *이중 표준*
        - 테스트 API 코드에 적용하는 표준은 실제 코드에 적용하는 표준과 다르다 
            - 단순, 간결, 풍부한 표현이 필요하고 실제 코드처럼 효율적일 필요는 없다

        - 테스트 환경은 보통 자원이 부족하지 않아서 효율보다 가독성에 중점을 둔다
            - 반복되고 의미를 확실하게 정의 하지 않는 코드는 효율이 떨어지더라도 반복되지 않고 명확한 의미전달을 하는 코드로 바꾸는 것이 좋다
        
- ### 테스트 당 assert 하나
    - assert문이 단 하나인 함수는 결론이 하나라서 코드를 이해하기 쉽고 빠르다
        - 여러 조건을 테스트 하는 경우 분리해서 정의 한다
    
    - *given-when-then*
        - 함수의 접두사로 정의해서 표현하거나 주석으로 써서 코드를 깔끔하게 만들수 있다
        - *TEMPLATE METHOD 패턴*
            - given/when부분을 부모 클래스에 두고 then 부분을 자식 클래스에 둔다
            - 테스트를 분리하면 중복되는 코드가 많아져서 이패턴으로 중복을 제거할 수 있다

        - 독자적인 테스트 클래스를 만들어서 @Before 함수에 given/when을 넣고 @Test에 then을 넣어도 된다 
        
    - 위의 방법들은 배보다 배꼽이 더 커질수 있다
        - 때로는 그냥 assert문을 여러개 사용하는 편이 좋을 수 있다
    
    - *테스트 당 개념 하나*
        - 테스트 함수 하나는 개념 하나만 테스트 해야한다
        - assert문 개수는 최대한 줄여야 한다
        
- ### F.I.R.S.T
    - Fast : 테스트는 빨라야 한다, 자주 돌릴 수 있어야 한다 
    - Independent : 각 테스트는 서로 완전히 독립적이어야 한다
    - Repeatable : 어떤 환경에서도 반복 가능해야 한다
    - Self-Validating : bool값으로 결과를 내야 한다 
    - Timely : 단위 테스트는 실제 코드를 구현하기 직전해 구현한다

> 결론
- 테스트 코드는 실제 코드의 유연성, 유지보수성, 재사용성을 보존하고 강화한다
- 따라서 지속적으로 깨끗하게 관리해야 한다
- 도메인 특화 언어를 사용하라
