- 안정적 서비스를 위해서는 네트워크뿐 아니라 애플리케이션도 이중화 기술을 적용해야 한다

## 이중화 기술 개요
- SPoF(Single Point of Failure) 
    - 시스템 구성 요소 하나가 동작하지 않으면 전체 시스템이 중단되는 요소
    - SPoF를 최소화해서 전체 서비스를 안정적으로 설계해야 한다

- 이중화의 목적
    - 인프라를 구성하는 각 요소가 복수여야 장애 발생시 다른 인프라를 통해 서비스가 지속된다
    - 서비스가 필요한 출발 지점부터 끝 지점까지(End-to-End) 모든 인프라에 이중화 구성을 고려해야 한다
        - 액티브-액티브또는 액티브-스탠바이 형태로 구성한다
        - 액티브-액티브 구성으로 요청을 동시 처리하면 처리가능한 전체 용량이 증가한다
            - 이 용량을 기준으로 하면 한쪽에 장애가 발생했을때 처리가능한 양이 반으로 줄어서 정상적인 서비스가 불가능하다

    - 이중화의 목적
        - 장애 허용(FT, Falut Tolerance) : 이중화는 장애 상황에도 서비스에 연속성이 보장한다

- *데이터 센터의 이중화*
    - DR센터(Disaster Recovery Center, 재해복구센터) 
        - 데이터 센터에 장애 발생시 서비스를 대신 처리한다


## LACP
- 1990년대 중반, 벤더별로 장비 간 대역폭을 늘리기 위해 독자적인 방법을 구현했지만 다른 장비와 호환성 문제 발생
- LACP(Link Aggregation Control Protocol) : IEEE 802.3 그룹에서 시작한 상호호환 가능한 연결 계층 표준화
    - 현재 IEEE 802.1AX-2008에 명시되어있다
    - 두개 이상의 물리인터페이스로 구성된 논리 인터페이스로 액티브-액티브... 구성을 사용해서 대역폭을 확장한다
    - 목적
        - 대역폭 확장을 통한 
            - 링크 사용률 향상(Improved Utilization of Available Link)
            - 향상된 장애 회복(Improved Resilience)

    - 유의사항
        1. 전체 트래픽 기준을 물리 인터페이스 하나의 대역폭으로 정해야 장애 발생시에 정상적인 서비스를 제공할 수 있다
        2. 구성 물리 인터페이스들의 속도가 동일해야 한다
        
- LACP 동작 방식
    - LACPDU(LACP Data Unit) : LACP를 통해 장비 간 논리 인터페이스를 구성하는 프레임
        - 출발지 주소, 목적지 주소, 타입, 서브 타입, 버전 정보등을 매초마다 주고 받는다
        - 멀티캐스트 통신, 목적지 주소로 "01:80:c2:00:00:02"부터 "01:80:c2:00:00:10"까지 사용
    
    - 물리 인터페이스가 같은 장비에 다중연결 되어서 단일 장비에서만 LACPDU를 주고받아야 LACP연결이 가능하다
        - (스위치)=(물리 인터페이스x2)=(스위치)
    
    - LACP 설정
        - 양 쪽 장비모두 LACP설정을 해야만 LACPDU를 정상적으로 주고 받을 수 있다
        - 액티브 : LACPDU를 송신, 상대방이 LACP로 구성되어있으면 LACP구성(일반적)
        - 패시브 : LACPDU를 수신하면 응답해 LACP구성
    


    
