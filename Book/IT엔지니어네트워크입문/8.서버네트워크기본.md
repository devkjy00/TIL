## 서버의 네트워크 설정 및 확인
- 리눅스 서버 네트워크
    - 네트워크 설정 파일 경로
        - CentOS : /etc/sysconfig/network-scripts
            - 인터페이스별로 설정 파일 존재
        - Ubuntu : /etc/network/interfaces
            - interfaces 설정 파일에 모든 인터페이스 설정 존재

    - 인터페이스 설정 파일의 주요 항목(Cent OS)
        - ONBOOT : 부팅시 활성화(yes/no)
        - BOOTPROTO : 활성할 프로토콜(none, dhcp, static)
            - none : BOOTP(BOOTstrap Protocol을 사용
        - IPADDR : IP주소
        - NETMASK : 서브넷
        - PREFIX : 서브넷 비트값(/24)
        - GATEWAY : 게이트웨이
        - DNS1 : 주 DNS
        - DNS2 : 보조 DNS
    - 설정 파일을 수정하면 네트워크 서비스나 인터페이스를 재시작 해야 한다
        - CentOS : systemctl restart network.service (네트워크 서비스 재시작)
        - Ubuntu : /etc/init.d/networking [start, stop, reload, restart, force-reload]
    
    - ifconfig 명령어
        - 설정한 IP, 서브넷, 게이트웨이등 다양한 정보 확인 가능
        - net-tools 패키지
            - 리눅스 네트워크 관련 시스템 도구 패키지
            - 명령어 : ifconfig, arp, hostname, netstat, rarp, route, plipconfig, slattach, mii-tool, iptunnel, ipmaddr

    - ip 명령어
        - ip address
            - 네트워크 정보
        - ip -s link
            - 인터페이스로 송수신되는 패킷정보
            - 입력(RX), 출력(TX)된 패킷 수, 에러/폐기된 패킷 수
    
- 윈도 서버 네트워크
    - GUI
        - 실행창-ncpa.cpl
        - 설정할 네트워크 어댑터 우클릭 - 속성
        - Internet Protocol Version(TCP/IPv4)속성 선택
            - 네트워크 정보를 설정할 수 있다
            - 고급 설정에서 네트워크 어댑터 우선순위를 설정하는 메트릭을 수동으로 변경해 사용할 수 있다
        
        - 속성값 입력 후 확인
            - 네트워크 어댑터 재시작 : 네트워크 어댑터 우클릭 - 사용안함 - 사용
        - 명령 프롬프트에서 ipconfig 명령으로 설정값 확인 가능

    - CLI 
        - netsh 명령 (관리자 권한)
            - IP 설정 -> netsh interface ip4 set address name="인터페이스명" static ip 주소 서브넷 게이트웨이
            - DHCP 환경 -> netsh interface ip4 set address name="인터페이스명" source=dhcp
                - address대신 dns를 넣으면 DNS주소를 자동 할당 받는다

            - DNS 서버 주소정보 -> netsh interface ip4 set address name="인터페이스명" static DNS_서버주소
            - 윈도 어댑터 비활성화/활성화
                - netsh interface set interface name="인터페이스명" addmin=disabled/enabled

## 서버의 라우팅 테이블
- 네트워크 어댑터가 한개
    - 라우팅 테이블을 추가/삭제할 필요가 없다
    - 동일한 네트워크는 로컬 통신, 원격지는 디폴트 라우팅을 통해 게이트웨이로 지정된 인터페이스로 전송된다

- 네트워크 어댑터가 한개 이상(유선, 무선, 블루투스, PAN등) 
    - 모두 디폴트 게이트웨이(디폴트 라우팅) 설정을 하면 정상적으로 통신이 되지 않는다
    - 다른 어댑터에 별도의 라우팅 설정을 해야한다
        - 어떤 네트워크 카드를 사용해서 패킷을 전송할지

    - 하이퍼바이저가 설치된 가상화서버에서 운용할 수 있다

- 서버의 라우팅 테이블
    - 라우팅 테이블 -> 목적지 서브넷 게이트웨이 인터페이스 우선순위
        - 목적지 네트워크와 서브넷은 라우팅을 선택하는 기준이 된다(롱기스트 매치)

        - 게이트웨이는 선택된 목적지로 가는 넥스트 홉이다
            - 두 개이상의 네트워크 카드가 있다면 특정 네트워크 카드의 게이트 웨이로 지정해야 한다
        
        - 인터페이스는 서버의 네트워크 카드로 패킷을 라우팅할 물리적 경로를 의미한다

        - 우선순위(메트릭)는 동일한 라우팅 테이블가 있을 때 순위를 의미한다 

- 리눅스 서버의 라우팅 확인 및 관리
    - 라우팅 테이블 확인
        - ip route 
        - netstat -rn
    
    - 라우팅 테이블 추가
        - route add { -host | -net} Target[/prefix] [gw GW] [metric M] [[dev] If]
        - route add -host 10.10.10.10 gw 10.1.1.1
            - 특정 10.10.10.10 서버가 목적지인 경우, 10.1.1.1 로 라우팅
        
        - route add -net 10.10.10.0/24 dev eth0
            - 10.10.10.0/24 네트워크 대역이 목적지인 경우, eth0 인터페이스로 라우팅
        
        - route add -net 10.10.10.0/24 gw 10.1.1.6 metric 20
            - 10.10.10.0/24 네트워크 대역이 목적지인 경우, 10.1.1.6으로 라우팅

    - 라우팅 테이블 삭제
        - 라우팅 테이블이 모두 삭제되어도 디폴트 라우팅만 남아있다면 외부와 통신할 수 있다
        - route del { -host | -net} Target[/prefix] [gw GW] [metric M] [[dev] If]
            - add를 del로 바꾸기만 하면 된다
    
    - 영구적 라우팅 설정(재부팅 후에도 유지)
        - CentOS...
        - Ubuntu...

- 윈도 서버의 라우팅 확인 및 관리
    - 패턴 
        - \* : 전체 문자열 대체
        - ? : 특정 문자하나 대체
    - 라우팅 테이블 확인
        - route print
        - route print 10.10.*
            - 10.10.0.0./16 에 대한 전체 테이블
        
    - 라우팅 테이블 추가
        - ROUTE [ -p ] ADD [ dest ] [ MASK netmask ] [ gateway ] [ METRIC metric ] [ IF interface ]
            - 목적지 IP, 서브넷, 게이트웨이를 지정
            - -p 옵션을 추가하면 영구 경로로 등록된다
        
        - route add 192.168.1.0 mask 255.255.255.0 10.0.0.1
            - 목적지 192.168.1.0/24 에 대해 10.0.0.1을 게이트웨이로 라우팅 추가
        
        - route add 192.168.1.0 mask 255.255.255.0 10.0.1.1 metric 100
            - 목적지 192.168.1.0/24 에 대해 10.0.1.1을 게이트웨이로 하고 메트릭을 100인 라우팅 추가

    - 라우팅 테이블 삭제
        - ROUTE DELETE [ dest ] [ MASK netmask ] [ gateway ] [ METRIC metric ] [ IF interface ]
            - 삭제의 경우 서브넷, 게이트웨이를 입력하지 않아도 된다
                - 해당하는 모든 라우팅 테이블이 삭제 된다

    - 라우팅 테이블 변경
        - ROUTE CHANGE [ dest ] [ MASK netmask ] [ gateway ] [ METRIC metric ] [ IF interface ] 

        - route change 192.168.1.0 mask 255.255.255.0 10.0.10.1
            - 목적지 192.168.1.0/24에 대한 라우팅에 대해 게이트웨이를 10.0.10.1로 변경
        
        