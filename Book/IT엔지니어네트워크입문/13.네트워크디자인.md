네트워크 디자인과 구성에 따라 호스트 간 통신 경로가 달라지고 서비스 품질에도 영향을 미치게 된다

# 2계층/3계층 네트워크
- 2계층 네트워크
    - 동일한 네트워크 간 통신
    - 하나의 브로드캐스트 도메인이 된다
    - 스패닝 트리 프로토콜(STP)를 사용해 브로드 캐스트로 인한 루프 문제를 해결한다
        - 이로 인해 블록 포인트(루프를 막기위한 통신차단)가 생겨서 전체 인프라의 대역폭을 사용하지 못하는 문제 
        - MC-LAG와 같은 기술을 이용해 루프를 제거하고 논블로킹 구조를 구현할 수 있다
    
- 3계층 네트워크
    - 외부 네트워크 간 통신 
        - 루프가 발생하지 않는다
    - ECMP(Equal-Cost Multi-Path)라우팅 기술로 전체 네트워크 인프라의 대역폭을 모두 사용


# 3-Tier 아키텍처
- 코어(Core)-애그리게이션(Aggregation)-액세스(Access) 3계층으로 이루어진 전통적 네트워크 디자인 기법
    - 액세스 계층은 호스트와 직접 연결된다
    - 액세스 계층의 스위치들은 상위 애그리게이션 스위치로 집선되고 그위로 코어 계층 스위치는 다시 애그리게이션 스위치를 집션해서 서로 통신할 수 있게 연결한다
        - 상위로 갈수록 높은 대역폭이 필요하다

- 데이터 센터의 경우, 서비스를 요청받고 서버에서 응답하는 North-South 트래픽에 적합한 구조이다

# 2-Tier 아키텍처
- 스파인-리프(Spine-Leaf) 구조
    - 데이터 센터 디자인으로 많이 적용된다
    - 호스트들이 리프 계층 스위치에 연결되고 리프 스위치는 상단 스파인 스위치와 연결된다
        - STP가 동작하지 않고 모든 링크를 사용해 트래픽을 전송한다
        - 출발지 리프 스위치를 지나 스파인 스위치를 거쳐 목적지 리프 스위치로 가는 트래픽의 홉 수가 짧아지고 일정해 진다
    
- 데이터 센터 내부의 서버간 통신량의 급증으로 East-West(서버간 통신) 트래픽의 부하가 커지고 지연이 발생하는 것을 보완하기 위해 사용된다
    - *East-West 트래픽
        - 데이터 센터의 트래픽이 North-South에서 East-West로 바뀌어가는 이유
            - 서버 가상화
                - 서버 하나에 다수의 가상머신이 운영된다
                - 동일한 네트워크에 속빅 서버들이 하나의 리프 스위치가 아닌 다양한 스위치에 연결된다
                - 바로 옆에 있는 서비스도 모두 스파인 스위치를 통해 통신해야 한다
                - 대량의 트래픽 발생
            
            - 빅데이터 대중화
            
            - 애플리케이션 아키텍처와 개발 방법의 변화
        
        - 한마디로 서버간의 트래픽의 증가
    
- L2 패브릭 : 스파인-리프 사이를 2계층 네트워크로 구성하는 방법
    - TRILL(TRansparent Interconnection of Lot of Links), SPB(Shortest Path Bridging)과 같은 프로토콜 사용
    - 루프문제를 해결, 모든 링크를 활성화 한다
    
- L3 패브릭 : 스파인-리프 사이를 3계층 네트워크로 구성하는 방법
    - 일반적인 라우팅 프로토콜을 사용, ECMP를 통해 모든 링크를 사용할 수 있다

# 데이터 센터 Zone/PoD 내부망/DMZ망/인터넷망
- 인터넷망
    - 외부 인터넷에서 사용자가 데이터 센터에 접근할 수 있도록 구성된 영역
    - KT, SKT같은 ISP(Internet Service Provider)에서 인터넷 회선을 받아 연동 되어 있다

- 공인망(DMZ)
    - 외부 사용자에게 직접 노출되는 웹서비스등이 모인 망
    - 공인 IP가 사용된다, 서비스를 외부로 제공해서 서비스망이라고도 부른다

- 내부망(사내망/사설망)
    - 사내에서만 접근할 수 있는 내부 네트워크 영역

- 데이터베이스망
    - 보안을 위해 내부망에 별도로 두기도 한다
    - 내부망에서 접근할 때 추가로 방화벽을 두고 통신한다

- 대외망
    - 회사 대 회사로 서비스 연동이 필요한 경우 별도 전용선이나 VPN을 이용한 통신으로 연동할 수 있다

- 관리망/OoB(Out of Band)
    - 서버 관리망, 하드웨어 자체를 관리하기 위한 별도의 환경

# 케이블링과 네트워크
- ToR(Top of Rack)
    - 랙안에 설치된 서버들을 같은 랙 상단의 스위치에 직접 연결한 구성
    - 스위치가 동일한 랙에 있어서 케이블링의 길이나 복잡성이 줄어든다
    - EoR보다 더 많은 스위치가 필요하고 관리나 전력소비등으로 비용이 증가한다

- EoR(End of Row)
    - 서버 랙들의 끝에 하나의 스위치 랙을 두고 연결, 서버가 있는 랙과 네트워크 장비가 있는 랙을 분리한 구성
    - 스위치 수가 ToR에 비해 적어지고 통과하는 스위치수가 줄어서 지연에 유리하다
    - 서버와 스위치가 멀어서 케이블이 길어지고 케이블 교체비용이 증가한다

- MoR(Middle of Row)
    - 네트워크 장비 랙을 서버 랙들의 중간에 두는 구성
    - EoR과 비슷하지만 케이블길이가 상대적으로 감소하는 장점이 있다
        



